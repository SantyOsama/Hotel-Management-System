<!DOCTYPE html>
<html lang="en">
<head>
	<title>@ViewData["Title"] - HotelMangementSystem</title>
	<meta charset="utf-8" />
	<meta name="viewport"
		  content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
	@* <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />  *@
	@* <link rel="stylesheet" href="~/HotelMangementSystem.styles.css" asp-append-version="true" /> *@
	<link href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,600,700&display=swap"
		  rel="stylesheet" />

	<link rel="stylesheet" href="/css/open-iconic-bootstrap.min.css" />
	<link rel="stylesheet" href="/css/animate.css" />

	<link rel="icon" href="/images/Icon/hotel-9212.png">
	<link rel="stylesheet" href="/css/owl.carousel.min.css" />
	<link rel="stylesheet" href="/css/owl.theme.default.min.css" />
	<link rel="stylesheet" href="/css/magnific-popup.css" />

	<link rel="stylesheet" href="/css/aos.css" />

	<link rel="stylesheet" href="/css/ionicons.min.css" />

	<link rel="stylesheet" href="/css/bootstrap-datepicker.css" />
	<link rel="stylesheet" href="/css/jquery.timepicker.css" />

	<link rel="stylesheet" href="/css/flaticon.css" />
	<link rel="stylesheet" href="/css/icomoon.css" />
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/myOwnStyle.css" />
	<script type="importmap"></script>
</head>

<body>
	<!-- Start nav -->
	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light"
		 id="ftco-navbar">
		<div class="container">
			<a class="navbar-brand" asp-action="Index" asp-controller="Home">Hotel<span>Haven</span></a>
			<button class="navbar-toggler"
					type="button"
					data-toggle="collapse"
					data-target="#ftco-nav"
					aria-controls="ftco-nav"
					aria-expanded="false"
					aria-label="Toggle navigation">
				<span class="oi oi-menu"></span> Menu
			</button>

			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto" id="navUl">
					<li class="nav-item active" id="Home">
						<a asp-action="Index" asp-controller="Home" class="nav-link">Home</a>
					</li>
					<li class="nav-item" id="Hotels">
						<a asp-action="Index" asp-controller="Hotels" class="nav-link">Hotels</a>
					</li>
					<li class="nav-item" id="AboutUs">
						<a asp-action="About" asp-controller="Home" class="nav-link">About Us</a>
					</li>

					@if (User.Identity.IsAuthenticated)
					{

						<li class="nav-item" id="Cart">
							<a class="nav-link text-light" asp-controller="Cart" asp-action="Index"><i class="bi bi-person-circle"></i> Cart</a>
						</li>

					}
					else
					{
						<li class="nav-item">
							<a class="nav-link text-light" asp-area="" asp-controller="Account" asp-action="Login" id="Login">Login</a>
						</li>

						<li class="nav-item">
							<a class="nav-link text-light" asp-area="" asp-controller="Account" asp-action="Register" id="Register">Register</a>
						</li>
					}
					<li class="nav-item" >
						<!---------------------------------------------------------------------------------------->

						<div class="customnavbar nav-link">
							<div class="position-relative custome-w">
								<div class="cdropdown">

									<img id="profilePhoto"
										 src="/images/user-profile-circle-solid.svg"
										 class="profile-navbar"
										 alt="" />

									<div class="cdropdown-content">
										<p class="nav-link text-dark">
											Welcome , @(User.Identity.IsAuthenticated ? @User.Identity.Name : "Guest")

										</p>


										@if (User.IsInRole("TopAdmin") && User.Identity.IsAuthenticated)
										{
											<a class="nav-link text-dark" asp-area="" asp-controller="Role" asp-action="AddNewRole">Add New Role</a>
											<a class="nav-link text-dark" asp-area="" asp-controller="Role" asp-action="AssignRole">Assign Role</a>
											<a class="nav-link text-dark" asp-area="" asp-controller="HotelAdmin" asp-action="PendingHotels">Pending Hotels <span id="count" class="text-danger">@ViewBag.PendingHotelNumberNotification</span></a>
										}

										@if (!User.IsInRole("TopAdmin") && User.Identity.IsAuthenticated)
										{
											<a class="nav-link text-dark" asp-area="" asp-controller="HotelAdmin" asp-action="AddNewHotel">Become Hotel Manager</a>
											<a class="nav-link text-dark" asp-area="" asp-controller="HotelAdmin" asp-action="MyHotels">My Hotels</a>
										}
										@if (User.Identity.IsAuthenticated)
										{
											<a class="nav-link text-dark" asp-controller="Profile" asp-action="Index"><i class="bi bi-person-circle"></i> Profile</a>
											<a class="nav-link text-dark" asp-controller="Account" asp-action="Logout">Logout</a>

										}



									</div>
								</div>
							</div>
						</div>

						<!---------------------------------------------------------------------------------------->
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- END nav -->
	<div id="Notification"></div>

	@RenderBody()

	<footer class="ftco-footer ftco-section img"
			style="background-image: url(images/bg_4.jpg)">
		<div class="overlay"></div>
		<div class="container">
			<div class="row mb-5">
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">HotelHaven</h2>
						<p>
							Far far away, behind the word mountains, far from the countries
							Vokalia and Consonantia, there live the blind texts.
						</p>

					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4 ml-md-5">
						<h2 class="ftco-heading-2">Useful Links</h2>
						<ul class="list-unstyled">
							<li>
								<a asp-action="Index" asp-controller="Hotels" class="nav-link">Hotels</a>
							</li>
							<li>
								<a asp-action="About" asp-controller="Home" class="nav-link">About Us</a>
							</li>
							<li>
								<a asp-action="About" asp-controller="Home" class="nav-link">About Us</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Have a Questions?</h2>
						<div class="block-23 mb-3">
							<ul>
								<li>
									<span class="icon icon-map-marker"></span><span class="text">ITI , Asyut branch , Asyut , Egypt</span>
								</li>
								<li>
									<a>
										<span class="icon icon-phone"></span><span class="text">010011012015</span>
									</a>
								</li>
								<li>
									<a>
										<span class="icon icon-envelope"></span><span class="text">info@yourdomain.com</span>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 text-center">
					<p>
						Copyright &copy;
						<script>
							document.write(new Date().getFullYear());
						</script>
						All rights reserved | This Project is made by
						<i class="icon-heart color-danger" aria-hidden="true"></i> by

						<a href="https://www.linkedin.com/in/iamhobv/" target="_blank">Mohamed Ehab </a>
						<span> , </span>
						<a href="https://www.linkedin.com/in/mohammedmabedltawab/" target="_blank"> Mohamed Abd Eltawab</a>
						<span> and </span>
						<a href="https://www.linkedin.com/in/santy-osama/" target="_blank"> Santi Osama</a>

					</p>
				</div>
			</div>
		</div>
	</footer>

	<div id="ftco-loader" class="show fullscreen">
		<svg class="circular" width="48px" height="48px">
			<circle class="path-bg"
					cx="24"
					cy="24"
					r="22"
					fill="none"
					stroke-width="4"
					stroke="#eeeeee" />
			<circle class="path"
					cx="24"
					cy="24"
					r="22"
					fill="none"
					stroke-width="4"
					stroke-miterlimit="10"
					stroke="#F96D00" />
		</svg>
	</div>

	<partial name="_ValidationScriptsPartial" />

	<script>
		let url = window.location.href;
		if(url.includes("Home/About")){
		$("#navUl>li.active").removeClass("active");
		$("#navUl>li.active").removeClass("activepp");
			$('#AboutUs').addClass('active');
		}
		
		else if(url.includes("Profile") || url.includes("HotelAdmin") || url.includes("Role") ){
					$("#navUl>li.active").removeClass("active");
			$('#profilePhoto').addClass('activepp');

		}
		
		
		else if(url.includes("Home")){
		$("#navUl>li.active").removeClass("activepp");
		$("#navUl>li.active").removeClass("active");
		$('#Home').addClass('active');
		}
		else if(url.includes("Cart")){
		$("#navUl>li.active").removeClass("activepp");
		$("#navUl>li.active").removeClass("active");
			$('#Cart').addClass('active');
		}
		else if(url.includes("Hotels") || url.includes("Rooms")){
		$("#navUl>li.active").removeClass("activepp");
		$("#navUl>li.active").removeClass("active");
			$('#Hotels').addClass('active');
		}
		else if(url.includes("Login") || url.includes("Rooms")){
		$("#navUl>li.active").removeClass("activepp");
		$("#navUl>li.active").removeClass("active");
			$('#Login').addClass('active');
		}
		else if(url.includes("Register") || url.includes("Rooms")){
		$("#navUl>li.active").removeClass("activepp");
		$("#navUl>li.active").removeClass("active");
			$('#Register').addClass('active');
		}

	</script>


	<script src="/lib/microsoft-signalr/signalr.js"></script>
	@if (User.IsInRole("TopAdmin"))
	{
		<script>
				   var connection = new signalR.HubConnectionBuilder()
				  .withUrl("/HAddHotel")
				  .build();

				connection
				  .start()
				  .then(() => {
					console.log("connection started");
				  })
				  .catch();
						connection.on("NewHotelAdded",(number)=>{
						   $("#count").html = number
						   console.log(number);
				console.log("Hotel added successfuly");
			});
					connection.on("CheckConnect",(t,b)=>{
				console.log(t,b);
			});
				connection.on("NewHotelAdded",(hotelName)=>{
					 location.reload();
			});

		</script>
	}

	@if (User.Identity.Name == @ViewBag.userConnection)
	{
		<script>
				   var connection = new signalR.HubConnectionBuilder()
				  .withUrl("/HAddHotel")
				  .build();

				connection
				  .start()
				  .then(() => {
					console.log("connection started");
				  })
				  .catch();
						connection.on("NewHotelAdded",(number)=>{
						   $("#count").html(number)
						   console.log(number);
				console.log("Hotel added successfuly");
			});
					connection.on("CheckConnect",(t,b)=>{
				console.log(t,b);
				  connection.on("HotelAdded",(hotelName)=>{
					 $("#hotelName").html(hotelName);
				console.log(hotelName);
			});
			});
			  connection.on("NewHotelAdded",(hotelName)=>{
					 location.reload();
			});

		</script>
	}


	<script src="/js/jquery.min.js"></script>
	<script src="/js/jquery-migrate-3.0.1.min.js"></script>
	<script src="/js/popper.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/jquery.easing.1.3.js"></script>
	<script src="/js/jquery.waypoints.min.js"></script>
	<script src="/js/jquery.stellar.min.js"></script>
	<script src="/js/owl.carousel.min.js"></script>
	<script src="/js/jquery.magnific-popup.min.js"></script>
	<script src="/js/aos.js"></script>
	<script src="/js/jquery.animateNumber.min.js"></script>
	<script src="/js/bootstrap-datepicker.js"></script>
	<script src="/js/scrollax.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script src="/js/google-map.js"></script>
	<script src="/js/main.js"></script>
	<script src="/js/myOwnJS.js"></script>
	<script src="/lib/jquery/dist/jquery.min.js"></script>
	<script src="/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/js/site.js" asp-append-version="true"></script>
	@await RenderSectionAsync("Scripts", required: false)
</body>
</html>
